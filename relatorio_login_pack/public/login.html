<!doctype html><html lang='pt-BR'><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'><title>Login</title><style>body{font-family:Arial;background:#f4f6f8;display:grid;place-items:center;min-height:100vh;margin:0}.card{width:min(420px,92vw);background:#fff;border:1px solid #e5e7eb;border-radius:14px;box-shadow:0 8px 30px rgba(0,0,0,.08);padding:22px}label{display:block;font-size:13px;color:#374151;margin:12px 0 6px}input{width:100%;padding:10px 12px;border:1px solid #cbd5e1;border-radius:10px;font-size:14px}button{margin-top:12px;appearance:none;border:1px solid #cbd5e1;background:#fff;padding:10px 14px;border-radius:10px;font-size:14px;cursor:pointer}.primary{background:#2f5597;color:#fff;border-color:#2f5597}.err{color:#b91c1c;font-size:13px;margin-top:8px}.ok{color:#065f46;font-size:13px;margin-top:8px}</style></head><body><div class='card'><h2>Acesso</h2><div id='msg' style='display:none'></div><label>E-mail</label><input id='email' type='email'><label>Senha</label><input id='password' type='password'><div><button class='primary' id='btnLogin'>Entrar</button> <button id='btnGoUsers'>Usuários</button></div><hr><p><b>Primeiro acesso?</b> Crie o primeiro administrador.</p><label>Nome</label><input id='r_name'><label>E-mail</label><input id='r_email' type='email'><label>Senha</label><input id='r_password' type='password'><button id='btnBootstrap'>Criar primeiro administrador</button></div><script type='module'>import{setToken}from'./auth.js';const $=s=>document.querySelector(s),msg=$('#msg');function show(t,ok=false){msg.textContent=t;msg.style.display='block';msg.className=ok?'ok':'err'}$('#btnLogin').onclick=async()=>{msg.style.display='none';const email=$('#email').value.trim(),password=$('#password').value;if(!email||!password)return show('Preencha e-mail e senha');const r=await fetch('/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});const d=await r.json();if(!r.ok)return show(d?.error||'Falha no login');setToken(d.token);location.href='/app.html'};$('#btnGoUsers').onclick=()=>location.href='/users.html';$('#btnBootstrap').onclick=async()=>{msg.style.display='none';const name=$('#r_name').value.trim(),email=$('#r_email').value.trim(),password=$('#r_password').value;if(!name||!email||!password)return show('Preencha os campos');const r=await fetch('/api/auth/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,email,password,role:'admin'})});const d=await r.json();if(!r.ok)return show(d?.error||'Falha');show('Administrador criado. Faça login.',true)};</script></body></html>